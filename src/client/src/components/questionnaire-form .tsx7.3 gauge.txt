// ğŸ“¦ Importations en haut du fichier
// ğŸ§© React & React Hook Form
import { InterpretationValeursPhares } from "@/components/interpretation/InterpretationValeursPhares";
import ProfilEtPrompt from "./ProfilEtPrompt";



import { useNavigate } from "react-router-dom";
import React, { useState, useRef } from "react";
import { useForm, Controller } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";

// ğŸ” React Query
import { useMutation } from "@tanstack/react-query";

// ğŸ¨ IcÃ´nes Lucide
import {
  User, Heart, Puzzle, Rocket, Brain, Building2,
  ArrowLeft, ArrowRight, Sparkles, Eye, Headphones,
  Hand, TreePine, Monitor, Wrench, Users, Plane, Book
} from "lucide-react";
import { Gauge } from "lucide-react";


// ğŸ§± UI Components
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Slider } from "@/components/ui/slider";

import { Textarea } from "@/components/ui/textarea";
import { Label } from "@/components/ui/label";
import {
  Select, SelectContent, SelectItem,
  SelectTrigger, SelectValue
} from "@/components/ui/select";
import { Checkbox } from "@/components/ui/checkbox";
import { RadioGroup, RadioGroupItem } from "@/components/ui/radio-group";
import { Card, CardContent } from "@/components/ui/card";

// ğŸ”” Hooks & Utils
import { useToast } from "@/hooks/use-toast";
import { apiRequest } from "@/lib/queryClient";

// ğŸ“¦ Types & Schemas
import { orientationFormSchema, type OrientationFormData } from "@shared/schema";
import { type OrientationResults } from "../../../server/services/gemini";

function renderSection(title: string, data: Record<string, any>) {
  if (!data || typeof data !== "object") return null;

  return (
    <div className="mt-6">
      <h3 className="font-semibold text-lg mb-2">{title}</h3>
      <ul className="list-disc pl-6">
        {Object.entries(data).map(([key, value]) => (
          <li key={key}>
            <strong>{key.replaceAll("_", " ")} :</strong>{" "}
{typeof value === "string" || typeof value === "number"
  ? value
  : JSON.stringify(value)}

          </li>
        ))}
      </ul>
    </div>
  );
}



// ğŸ§  Interface des props
  interface QuestionnaireFormProps {
  currentSection: number;
  totalSections: number;
  onSectionChange: (section: number) => void;
  onShowResults: (results: OrientationResults, profileId: string) => void;
  isLoading: boolean;
  setIsLoading: (loading: boolean) => void;
  }


// â¬†ï¸ Avant le composant principal

const InterpretationIleDeserte = ({ selected }: { selected: string }) => {
  const messages: Record<string, string> = {
    "Carnet et crayon": "Tu as une imagination qui tâ€™emmÃ¨ne loinâ€¦ mÃªme sur une Ã®le dÃ©serte.",
    "Livre prÃ©fÃ©rÃ©": "Tu es du genre Ã  explorer, Ã  tâ€™Ã©vader, Ã  apprendre. CurieuxÂ·se et profondÂ·e.",
    "Casque audio": "Tu ressens fort, et la musique tâ€™accompagne partout.",
    "Outil multifonction": "Tu as lâ€™esprit pratique, toujours prÃªtÂ·e Ã  te dÃ©brouiller.",
    "Objet sentimental": "Tu es attachÃ©Â·e Ã  ce qui compte pour toi. Ce choix montre une belle sensibilitÃ©.",
    "Console portable": "Tu sais tâ€™amuser, mÃªme dans les endroits les plus improbables.",
    "Application magique": "Tu veux changer les choses, inventer, transformer. Ton imagination est puissante.",
    "Animal de compagnie": "Tu es du genre Ã  crÃ©er des liens forts. FidÃ¨le, affectueuxÂ·se, tu ne pars jamais seulÂ·e.",
    "Nourriture prÃ©fÃ©rÃ©e": "Tu sais ce qui te fait plaisir, ce qui te rÃ©conforte. Tu vis avec gourmandise et authenticitÃ©.",
    "Miroir ou objet symbolique": "Tu es en quÃªte de sens, peut-Ãªtre dâ€™identitÃ©. Tu rÃ©flÃ©chis Ã  qui tu es, et câ€™est une belle dÃ©marche.",
    "Autre": "Ton choix est unique, comme toi. Il en dit long sur ton monde intÃ©rieurâ€¦ et il mÃ©rite dâ€™Ãªtre explorÃ©.",
  };

  if (!selected || !messages[selected]) return null;

  return (
    <div className="mt-4 p-4 bg-indigo-50 border-l-4 border-indigo-400 text-indigo-800 rounded shadow-sm transition-opacity duration-500 ease-in-out">
      <p className="text-sm italic">{messages[selected]}</p>
    </div>
  );
};



// ğŸš€ Composant principal
export default function QuestionnaireForm({
  currentSection,
  totalSections,
  onSectionChange,
  onShowResults,
  isLoading,
  setIsLoading,
}: QuestionnaireFormProps) {
  const { toast } = useToast();
  const formRef = useRef<HTMLFormElement>(null);
  const [profil, setProfil] = useState<OrientationResults | null>(null);
  const navigate = useNavigate();

const [profilData, setProfilData] = useState(null); // â† Ã  lâ€™extÃ©rieur

const form = useForm<OrientationFormData>({
  // resolver: zodResolver(orientationFormSchema),
defaultValues: {
  videos: "",
  appMagique: "",
  ileDeserte: "",
  apprentissage: "",
  aspirations: "",
  inspirations: "",
  talents: [],
  competences: [],
  environnement: [],
  valeurs_generales: [],
  passion1: "",
  passion2: "",
  passion3: "",
  passion4: "",
  passion5: "",
  freins: "", 
  fierte: "",
  confiance: 5, // valeur par dÃ©faut au milieu de lâ€™Ã©chelle


    // ajoute ici tous les champs que tu veux garantir
  },
});


const generateProfileMutation = useMutation({
  mutationFn: async (data: OrientationFormData) => {
    console.log("ğŸ“¤ Envoi des donnÃ©es Ã  l'API !", data);

    const response = await fetch(`${import.meta.env.VITE_API_URL}/api/orientation`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(data),
    });

    if (!response.ok) {
      throw new Error("Erreur lors de la gÃ©nÃ©ration du profil");
    }

    return await response.json();
  },
});




// âœ… Ensuite, tu peux dÃ©clarer handleSubmit en dehors

// ğŸ”§ Fonction utilitaire pour transformer la rÃ©ponse du backend

function mapResponseToOrientationResults(response: any): OrientationResults {
  return {
    analyse_profil: response.analyse_profil ?? {},
    recommandations_carrieres: response.recommandations_carrieres ?? [],
    conseils_generaux: response.conseils_generaux ?? {},
    message_inspirant: response.message_inspirant ?? "",
    ileDeserte: response.ileDeserte ?? "",
    interpretation_ileDeserte: response.interpretation_ileDeserte ?? "",
    videos: response.videos ?? "",
    interpretation_videos: response.interpretation_videos ?? "",
    confiance: response.confiance ?? form.getValues("confiance"), // âœ… Ajout ici
  };
}



const handleSubmit = async (data: OrientationFormData) => {
  setIsLoading(true);
  setProfilData(data); // â† stocke les rÃ©ponses pour affichage

  // ğŸ” Ajout du log pour vÃ©rification
  console.log("ğŸ“¦ DonnÃ©es envoyÃ©es Ã  Gemini :", data);

  generateProfileMutation.mutate(data, {
    onSuccess: (response) => {
    console.log("âœ… RÃ©ponse complÃ¨te du backend :", response);

      const hasCareers = response.recommandations_carrieres?.length > 0;
      const hasProfileText =
        response.analyse_profil &&
        Object.keys(response.analyse_profil).length > 0;

      if (hasCareers && hasProfileText) {
       const results = mapResponseToOrientationResults(response);
       setProfil(results);


        // ğŸ” Ajout du log pour vÃ©rifier la rÃ©ponse complÃ¨te
        console.log("âœ… RÃ©ponse Gemini :", response);

        navigate("/resultats", {
          state: { profil: results, source: "profil-temporaire" },
        });

        onShowResults(results, "profil-temporaire");

        toast({
          title: "Profil gÃ©nÃ©rÃ© avec succÃ¨s ! ğŸ‰",
          description: `Analyse disponible pour ${response.prenom ?? "l'utilisateur"}`,
          status: "success",
          duration: 9000,
          isClosable: true,
        });
      } else {
        toast({
          title: "Profil incomplet",
          description: "La rÃ©ponse de Gemini ne contient pas assez d'informations.",
          status: "warning",
          duration: 6000,
          isClosable: true,
        });
      }

      setIsLoading(false);
    },

    onError: (error) => {
      console.error("âŒ Erreur cÃ´tÃ© frontend :", error);
      toast({
        title: "Erreur",
        description: "Impossible de gÃ©nÃ©rer ton profil. RÃ©essaie plus tard.",
        status: "error",
        duration: 6000,
        isClosable: true,
      });
      setIsLoading(false);
    },

    onSettled: () => {
      setIsLoading(false);
    },
  });
};



// âœ… Et nextSection reste tel quel
const nextSection = () => {
  if (currentSection < totalSections) {
    onSectionChange(currentSection + 1);
    scrollToSection(currentSection + 1);
  }
};



  const prevSection = () => {
    if (currentSection > 1) {
      onSectionChange(currentSection - 1);
      scrollToSection(currentSection - 1);
    }
  };

  const scrollToSection = (section: number) => {
    const element = document.querySelector(`[data-section="${section}"]`);
    if (element) {
      element.scrollIntoView({ behavior: "smooth", block: "start" });
    }
  };

const checkboxOptions = {
  interet: [
    { value: "Musique", label: "ğŸµ Musique" },
    { value: "Dessin", label: "ğŸ¨ Dessin" },
    { value: "Technologie", label: "ğŸ’» Technologie" },
    { value: "Animaux", label: "ğŸ• Animaux" },
    { value: "Lecture", label: "ğŸ“š Lecture" },
    { value: "Jeux vidÃ©o", label: "ğŸ® Jeux vidÃ©o" },
    { value: "Ã‰cologie", label: "ğŸŒ± Ã‰cologie" },
  ],
  competence: [
    { value: "MathÃ©matiques", label: "ğŸ”¢ MathÃ©matiques" },
    { value: "Expression Ã©crite", label: "âœï¸ Expression Ã©crite" },
    { value: "Sciences naturelles", label: "ğŸ”¬ Sciences naturelles" },
    { value: "Langues Ã©trangÃ¨res", label: "ğŸŒ Langues Ã©trangÃ¨res" },
    { value: "Informatique", label: "ğŸ’» Informatique" },
    { value: "Communication orale", label: "ğŸ—£ï¸ Communication orale" },
    { value: "RÃ©solution de problÃ¨mes", label: "ğŸ§  RÃ©solution de problÃ¨mes" },
    { value: "CrÃ©ativitÃ© artistique", label: "ğŸ¨ CrÃ©ativitÃ© artistique" },
    { value: "Sport", label: "âš½ Sport" },
  ],
  talent: [
    { value: "Communication", label: "Communication" },
    { value: "Apaiser les conflits", label: "Apaiser les conflits" },
    { value: "Organiser des sorties", label: "Organiser des sorties" },
    { value: "ÃŠtre un bon confident", label: "ÃŠtre un bon confident" },
    { value: "Imagination dÃ©bordante", label: "Imagination dÃ©bordante" },
    { value: "Dessiner", label: "Dessiner" },
    { value: "Ã‰crire", label: "Ã‰crire" },
    { value: "Musique", label: "Musique" },
    { value: "Solutions originales", label: "Solutions originales" },
    { value: "Ã€ l'aise avec les mains", label: "Ã€ l'aise avec les mains" },
    { value: "Monter des meubles", label: "Monter des meubles" },
    { value: "RÃ©parer", label: "RÃ©parer" },
    { value: "Cuisiner", label: "Cuisiner" },
    { value: "S'occuper des animaux", label: "S'occuper des animaux" },
    { value: "Puzzles", label: "Puzzles" },
    { value: "Comprendre comment les choses fonctionnent", label: "Comprendre le fonctionnement" },
    { value: "Logique complexe", label: "Logique complexe" },
  ],
  motivation: [
    { value: "CrÃ©er", label: "ğŸ¨ CrÃ©er" },
    { value: "Aider", label: "ğŸ¤ Aider" },
    { value: "RÃ©soudre", label: "ğŸ§© RÃ©soudre" },
    { value: "Collaborer", label: "ğŸ‘¥ Collaborer" },
    { value: "Autre", label: "âœ¨ Autre" },
  ],
  apprentissageStyle: [
    { value: "Visuel", label: "Visuel", icon: Eye },
    { value: "Auditif", label: "Auditif", icon: Headphones },
    { value: "KinesthÃ©sique", label: "KinesthÃ©sique", icon: Hand },
  ],
  environnement: [
    { value: "En extÃ©rieur", label: "En extÃ©rieur", icon: TreePine },
    { value: "Bureau", label: "Bureau", icon: Monitor },
    { value: "Atelier", label: "Atelier", icon: Wrench },
    { value: "Public", label: "Public", icon: Users },
    { value: "DÃ©placement", label: "DÃ©placement", icon: Plane },
  ],
  valeurs_generales: [
    { value: "HonnÃªtetÃ©", label: "ğŸ’ HonnÃªtetÃ©" },
    { value: "Respect", label: "ğŸ¤ Respect" },
    { value: "TolÃ©rance", label: "ğŸŒˆ TolÃ©rance" },
    { value: "Empathie", label: "ğŸ’— Empathie" },
    { value: "Innovation", label: "ğŸ”¬ Innovation" },
    { value: "Respect de l'environnement", label: "ğŸŒ± Respect de l'environnement" },
    { value: "Autre", label: "âœ¨ Autre" },
  ],
  connaissance: [
    { value: "MathÃ©matiques", label: "ğŸ”¢ MathÃ©matiques" },
    { value: "Histoire", label: "ğŸ“š Histoire" },
    { value: "Biologie", label: "ğŸ§¬ Biologie" },
    { value: "Informatique", label: "ğŸ’» Informatique" },
    { value: "Langues", label: "ğŸŒ Langues" },
  ],
};

// console.log("ğŸ” Profil dans le render :", profil);
// console.log("âœ… Recommandations :", profil?.recommandations_carrieres);

return (
    <div className="max-w-4xl mx-auto px-4 pb-24">
      <form onSubmit={form.handleSubmit(handleSubmit)} className="space-y-8">
	 {form.formState.errors.age && (
  <p className="text-red-500 text-sm mt-1">
    {form.formState.errors.age.message}
  </p>
)}
 


 {/* ğŸ‘‡ Câ€™est ici que tu vas insÃ©rer lâ€™affichage du profil JSX*/}
{profil && (
  <Card
    className="shadow-xl border-l-4 border-green-500 transition-all duration-500 mt-12"
    data-section="rÃ©sultat"
  >
<CardContent className="p-8">
  <div className="flex items-center mb-6">
    <div className="w-12 h-12 bg-gradient-to-r from-green-500 to-green-700 rounded-full flex items-center justify-center mr-4">
      <Sparkles className="text-white h-6 w-6" />
    </div>
    <h2 className="text-2xl font-bold text-gray-900 dark:text-white">
      ğŸ§  Profil dâ€™orientation pour {form.getValues("prenom") || "l'utilisateur"}
    </h2>
  </div>

	  {renderSection("ğŸ“ Analyse du profil", profil.analyse_profil)}
      {renderSection("ğŸ” HypothÃ¨ses gÃ©nÃ©rales", profil.hypotheses_generales)}
      {renderSection("ğŸ’¡ Conseils gÃ©nÃ©raux", profil.conseils_generaux)}
	  

{Array.isArray(profil.recommandations_carrieres) && (
  <div className="mb-6">
    <h3 className="font-semibold text-lg mb-2">ğŸ’¼ Recommandations de carriÃ¨re</h3>
    <div className="space-y-4">
      {profil.recommandations_carrieres.map((metier, index) => (
        <div key={index} className="p-4 border rounded-lg shadow-sm bg-white dark:bg-gray-800">
          <h4 className="text-xl font-bold mb-2">ğŸ”¹ {metier.titre}</h4>
          <p className="mb-2">{metier.description}</p>
          {metier.pourquoi_innovant_non_traditionnel && (
            <p className="italic text-sm text-gray-600 mb-2">
              ğŸ’¡ Pourquoi câ€™est innovant : {metier.pourquoi_innovant_non_traditionnel}
            </p>
          )}
          {Array.isArray(metier.lien_profil) && (
            <ul className="list-disc pl-6 mb-2">
              {metier.lien_profil.map((lien, i) => (
                <li key={i}>{lien}</li>
              ))}
            </ul>
          )}
        </div>
      ))}
    </div>
  </div>
)}

    </CardContent>
  </Card>
)}

		
		
        {/* Section 1: Identity & Context */}
        <Card 
          className={`shadow-xl border-l-4 border-primary transition-all duration-500 ${
            currentSection === 1 ? 'form-section active' : 'form-section'
          }`}
          data-section="1"
        >
          <CardContent className="p-8">
            <div className="flex items-center mb-6">
              <div className="w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center mr-4">
                <User className="text-white h-6 w-6" />
              </div>
              <h2 className="text-2xl font-bold text-gray-900 dark:text-white">ğŸ¯ IdentitÃ© & Contexte</h2>
            </div>

            <div>
             <Label htmlFor="prenom">PrÃ©nom</Label>
             <Input
               id="prenom"
              type="text"
               placeholder="Ex : LÃ©a"
               {...form.register("prenom")}
  
           />
           </div>


             <div className="space-y-4">
         
              <div>
                <Label htmlFor="age">Ã‚ge</Label>
                <Input
                  id="age"
                  type="number"
                  min="10"
                  max="25"
                  placeholder="Ex : 15"
                  {...form.register("age", { valueAsNumber: true })}
                />
              </div>
              
<div>
  <label htmlFor="genre">Genre</label>
  <select {...form.register("genre")} id="genre" className="w-full border rounded px-3 py-2">
    <option value="">SÃ©lectionner...</option>
    <option value="homme">Homme</option>
    <option value="femme">Femme</option>
    <option value="non-binaire">Non-binaire</option>
    <option value="autre">Autre</option>
  </select>
</div>

              
              <div>
                <Label htmlFor="mobilite">Localisation / MobilitÃ©</Label>
                <Input
                  id="mobilite"
                  placeholder="Ex : Paris, Lyon, Marseilleâ€¦"
                  {...form.register("mobilite")}
                />
              </div>
              
              <div>
<label htmlFor="disponibilite">DisponibilitÃ©</label>
<select {...form.register("disponibilite")} id="disponibilite" className="w-full border rounded px-3 py-2">
  <option value="">SÃ©lectionner...</option>
  <option value="temps-plein">Temps plein</option>
  <option value="temps-partiel">Temps partiel</option>
  <option value="freelance">Freelance</option>
  <option value="stage">Stage</option>
  <option value="alternance">Alternance</option>
</select>

              </div>
            </div>

            <div className="mt-6">
              <Label htmlFor="argent">Si l'argent n'Ã©tait pas un problÃ¨me, que ferais-tu ?</Label>
              <Textarea
                id="argent"
                rows={3}
                placeholder="DÃ©cris ta journÃ©e idÃ©aleâ€¦"
                {...form.register("argent")}
              />
            </div>

            <div className="mt-6">
              <Label htmlFor="citation">Citation ou devise personnelle</Label>
              <Input
                id="citation"
                placeholder="Ex : 'Rien n'est impossible'"
                {...form.register("citation")}
              />
            </div>
          </CardContent>
        </Card>


        {/* Section 2: Passions & Interests */}
        <Card 
          className={`shadow-xl border-l-4 border-secondary transition-all duration-500 ${
            currentSection === 2 ? 'form-section active' : 'form-section'
          }`}
          data-section="2"
        >
          <CardContent className="p-8">
            <div className="flex items-center mb-6">
              <div className="w-12 h-12 bg-gradient-to-r from-secondary to-accent rounded-full flex items-center justify-center mr-4">
                <Heart className="text-white h-6 w-6" />
              </div>
              <h2 className="text-2xl font-bold text-gray-900 dark:text-white">â¤ï¸ Passions & Centres d'intÃ©rÃªt</h2>
            </div>

            <div className="mb-8">
              <img 
                src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=300" 
                alt="Adolescents explorant leurs passions crÃ©atives" 
                className="w-full h-48 object-cover rounded-lg"
              />
            </div>

            <div className="space-y-4 mb-6">
              <h3 className="text-lg font-semibold text-gray-800 dark:text-gray-200">Top 5 de tes passions</h3>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Input placeholder="ğŸ¯ Passion 1" {...form.register("passion1")} />
                <Input placeholder="ğŸ¯ Passion 2" {...form.register("passion2")} />
                <Input placeholder="ğŸ¯ Passion 3" {...form.register("passion3")} />
                <Input placeholder="ğŸ¯ Passion 4" {...form.register("passion4")} />
                <Input placeholder="ğŸ¯ Passion 5" {...form.register("passion5")} />
              </div>
            </div>

            <div className="mb-6">
              <h3 className="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">Centres d'intÃ©rÃªt</h3>
              <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">

<div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
  {checkboxOptions.interet.map((option) => (
    <div key={option.value} className="flex items-center">
      <input
        type="checkbox"
        value={option.value}
        {...form.register("interet")}
        id={`interet-${option.value}`}
        className="form-checkbox h-5 w-5 text-primary"
      />
      <label htmlFor={`interet-${option.value}`} className="ml-2">
        {option.label}
      </label>
    </div>
  ))}
</div>


              </div>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">

<div className="my-6">
  <hr className="border-t border-gray-300" />
</div>





<div className="my-6">
  <hr className="border-t border-gray-300" />
</div>

<div className="mb-6">
  <label htmlFor="ileDeserte" className="block font-medium mb-2">
    ğŸï¸ Si tu devais aller sur une Ã®le dÃ©serte, quel objet emporterais-tu ?
  </label>

  <select {...form.register("ileDeserte")} id="ileDeserte" className="w-full border rounded px-3 py-2">
    <option value="">SÃ©lectionner...</option>
    <option value="Carnet et crayon">ğŸ“ Carnet et crayon</option>
    <option value="Livre prÃ©fÃ©rÃ©">ğŸ“– Livre prÃ©fÃ©rÃ©</option>
    <option value="Casque audio">ğŸ§ Casque audio</option>
    <option value="Outil multifonction">ğŸ”¨ Outil multifonction</option>
    <option value="Objet sentimental">ğŸ§¸ Objet sentimental</option>
    <option value="Console portable">ğŸ® Console portable</option>
    <option value="Application magique">ğŸª„ Application magique</option>
    <option value="Animal de compagnie">ğŸ• Animal de compagnie</option>
    <option value="Nourriture prÃ©fÃ©rÃ©e">ğŸ« Nourriture prÃ©fÃ©rÃ©e</option>
    <option value="Miroir ou objet symbolique">ğŸª Miroir ou objet symbolique</option>
    <option value="Autre">ğŸ¤” Autre</option>
  </select>

<InterpretationIleDeserte selected={form.watch("ileDeserte")} />


  {form.formState.errors.ileDeserte && (
    <p className="text-red-500 text-sm mt-1">
      {form.formState.errors.ileDeserte.message}
    </p>
  )}
</div>

<div className="my-6">
  <hr className="border-t border-gray-300" />
</div>


{/*  SUPPRIME   
              <div>
                <Label>Genre de vidÃ©os prÃ©fÃ©rÃ©es</Label>
                <Select onValueChange={(value) => form.setValue("videos", value)}>
                  <SelectTrigger>
                    <SelectValue placeholder="-- Choisir --" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="Tutoriels">ğŸ“š Tutoriels</SelectItem>
                    <SelectItem value="Reportages">ğŸ“º Reportages</SelectItem>
                    <SelectItem value="DÃ©fis">ğŸ† DÃ©fis</SelectItem>
                    <SelectItem value="Jeux vidÃ©o">ğŸ® Jeux vidÃ©o</SelectItem>
                    <SelectItem value="Musique">ğŸµ Musique</SelectItem>
                    <SelectItem value="Autre">âœ¨ Autre</SelectItem>
                  </SelectContent>
                </Select>
              </div>
*/}

<div className="mb-4 mt-6">
  <label htmlFor="videos" className="block font-medium mb-1">
    ğŸ¥ Tes vidÃ©os prÃ©fÃ©rÃ©es
  </label>

  <select {...form.register("videos")} id="videos" className="w-full border rounded px-3 py-2 mt-2">
    <option value="">SÃ©lectionner...</option>
    <option value="Humour">ğŸ˜‚ Humour</option>
    <option value="Sport">âš½ Sport</option>
    <option value="Musique">ğŸµ Musique</option>
    <option value="Science">ğŸ”¬ Science</option>
    <option value="SÃ©ries">ğŸ“º SÃ©ries</option>
    <option value="Films">ğŸ¬ Films</option>
    <option value="Autre">ğŸ¤” Autre</option>
  </select>

  {form.formState.errors.videos && (
    <p className="text-red-500 text-sm mt-1">
      {form.formState.errors.videos.message}
    </p>
  )}
</div>

<div className="my-6">
  <hr className="border-t border-gray-300" />
</div>


              <div>
                <Label htmlFor="appMagique">ğŸ§â€ Si tu pouvais fabriquer une application magique ce serait laquelle? </Label>
                <Input
                  id="appMagique"
                  placeholder="DÃ©cris ton app idÃ©ale..."
                  {...form.register("appMagique")}
                />
              </div>
            </div>
          </CardContent>
        </Card>

<div className="my-6">
  <hr className="border-t border-gray-300" />
</div>


{/* Section 3: Skills & Talents */}
<Card 
  className={`shadow-xl border-l-4 border-accent transition-all duration-500 ${
    currentSection === 3 ? 'form-section active' : 'form-section'
  }`}
  data-section="3"
>
  <CardContent className="p-8">
    <div className="flex items-center mb-6">
      <div className="w-12 h-12 bg-gradient-to-r from-accent to-primary rounded-full flex items-center justify-center mr-4">
        <Puzzle className="text-white h-6 w-6" />
      </div>
      <h2 className="text-2xl font-bold text-gray-900 dark:text-white">ğŸ§© CompÃ©tences & Talents</h2>
    </div>

    <div className="mb-8">
      <img 
        src="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=300" 
        alt="Jeunes dÃ©veloppant leurs compÃ©tences techniques" 
        className="w-full h-48 object-cover rounded-lg"
      />
    </div>

    <div className="mb-8">
      <h3 className="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">CompÃ©tences techniques ou scolaires</h3>
      <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        {checkboxOptions.competence.map((option) => (
          <div key={option.value} className="flex items-center">
            <input
              type="checkbox"
              value={option.value}
              {...form.register("competences")}
              id={`competences-${option.value}`}
              className="form-checkbox h-5 w-5 text-primary"
            />
            <label htmlFor={`competences-${option.value}`} className="ml-2">
              {option.label}
            </label>
          </div>
        ))}
      </div>
    </div>

    <div>
      <h3 className="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">Talents naturels</h3>
      <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        {checkboxOptions.talent.map((option) => (
          <div key={option.value} className="flex items-center">
            <input
              type="checkbox"
              value={option.value}
              {...form.register("talents")}
              id={`talents-${option.value}`}
              className="form-checkbox h-5 w-5 text-primary"
            />
            <label htmlFor={`talents-${option.value}`} className="ml-2">
              {option.label}
            </label>
          </div>
        ))}
      </div>
    </div>
  </CardContent>
</Card>



{/* Section 4: Motivations & Aspirations */}
<Card 
  className={`shadow-xl border-l-4 border-purple-500 transition-all duration-500 ${
    currentSection === 4 ? 'form-section active' : 'form-section'
  }`}
  data-section="4"
>
  <CardContent className="p-8">
    <div className="flex items-center mb-6">
      <div className="w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mr-4">
        <Rocket className="text-white h-6 w-6" />
      </div>
      <h2 className="text-2xl font-bold text-gray-900 dark:text-white">ğŸš€ Motivations & Aspirations</h2>
    </div>

    <div className="mb-8">
      <img 
        src="https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=300" 
        alt="Jeunes motivÃ©s travaillant ensemble" 
        className="w-full h-48 object-cover rounded-lg"
      />
    </div>

    <div className="mb-8">
      <h3 className="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">Ce qui te motive le plus</h3>
      {/* Tu peux ajouter ici une grille de motivations si tu veux */}
    </div>

    <div className="space-y-6">
      <div>
        <Label htmlFor="aspirations">Objectifs ou aspirations</Label>
        <Textarea
          id="aspirations"
          rows={3}
          placeholder="Raconte-nous tes rÃªves et ambitions..."
          {...form.register("aspirations")}
        />
      </div>

<div>
  <Label htmlFor="confiance">ğŸ§­ Ton niveau de confiance</Label>
  <Controller
    control={form.control}
    name="confiance"
    render={({ field }) => (
      <div className="flex items-center space-x-4 mt-2">
        <Slider
          min={1}
          max={10}
          step={1}
          value={[field.value || 5]}
          onValueChange={(val) => field.onChange(val[0])}
        />
        <span className="text-sm font-medium text-gray-700">{field.value}/10</span>
      </div>
    )}
  />
</div>


<div>
  <Label htmlFor="inspirations">Sujets ou personnes qui t'inspirent (et pourquoi)</Label>
  <Textarea
    id="inspirations"
    rows={3}
    placeholder="Qui sont tes hÃ©ros ? Qu'est-ce qui te passionne ?"
    {...form.register("inspirations")}
  />
</div>


      <div>
        <Label htmlFor="apprentissage">Ce que tu aimes apprendre en dehors de l'Ã©cole</Label>
        <Textarea
          id="apprentissage"
          rows={3}
          placeholder="Tes apprentissages prÃ©fÃ©rÃ©s en dehors des cours..."
          {...form.register("apprentissage")}
        />
      </div>
    </div>
  </CardContent>
</Card>

{/* Section 4.2: Freins & Doutes */}

<Card 
  className={`shadow-xl border-l-4 border-yellow-500 transition-all duration-500 ${
    currentSection === 6 ? 'form-section active' : 'form-section'
  }`}
  data-section="6"
>
  <CardContent className="p-8">
    <div className="flex items-center mb-6">
      <div className="w-12 h-12 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center mr-4">
        <Brain className="text-white h-6 w-6" />
      </div>
      <h2 className="text-2xl font-bold text-gray-900 dark:text-white">ğŸ§± Freins & Doutes</h2>
    </div>

    <div className="mb-8">
      <img 
        src="https://images.unsplash.com/photo-1520975922203-6c4c1b1d3c5b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=300" 
        alt="Jeune en rÃ©flexion face Ã  ses doutes" 
        className="w-full h-48 object-cover rounded-lg"
      />
    </div>

    <div className="space-y-6">
      <Label htmlFor="freins">Quâ€™est-ce qui pourrait tâ€™empÃªcher dâ€™avancer vers tes rÃªves ?</Label>
      <Textarea
        id="freins"
        rows={3}
        placeholder="Ex : manque de confiance, peur de lâ€™Ã©chec, pas dâ€™idÃ©es, etc."
        {...form.register("freins")}
      />
    </div>
  </CardContent>
</Card>


{/* Section 4.3: FiÃ¨rtÃ©s */}

<Card 
  className={`shadow-xl border-l-4 border-green-500 transition-all duration-500 ${
    currentSection === 7 ? 'form-section active' : 'form-section'
  }`}
  data-section="7"
>
  <CardContent className="p-8">
    <div className="flex items-center mb-6">
      <div className="w-12 h-12 bg-gradient-to-r from-green-400 to-green-600 rounded-full flex items-center justify-center mr-4">
        <Sparkles className="text-white h-6 w-6" />
      </div>
      <h2 className="text-2xl font-bold text-gray-900 dark:text-white">ğŸŒŸ Petites victoires</h2>
    </div>

    <div className="mb-8">
      <img 
        src="https://images.unsplash.com/photo-1607746882042-944635dfe10e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=300" 
        alt="Moment de fiertÃ© ou de rÃ©ussite personnelle" 
        className="w-full h-48 object-cover rounded-lg"
      />
    </div>

    <div className="space-y-6">
      <Label htmlFor="fierte">Parle-moi dâ€™un moment oÃ¹ tu as Ã©tÃ© fiÃ¨re de toi</Label>
      <Textarea
        id="fierte"
        rows={3}
        placeholder="MÃªme une petite chose !"
        {...form.register("fierte")}
      />
    </div>
  </CardContent>
</Card>


{/* Section 4.4: Echelle de confiance */}
<div className="space-y-6 mt-8">
  <Label htmlFor="confiance">ğŸ” Sur une Ã©chelle de 1 Ã  10, Ã  quel point crois-tu en ton potentiel ?</Label>
  <Input
    id="confiance"
    type="number"
    min={1}
    max={10}
    step={1}
    {...form.register("confiance", { valueAsNumber: true })}
    className="w-24"
  />
</div>


{/* Section 4.5: Slider */}
import { Controller } from "react-hook-form";
import { Slider } from "@/components/ui/slider";

// adapte selon ton arborescence

...

<Card 
  className={`shadow-xl border-l-4 border-purple-500 transition-all duration-500 ${
    currentSection === 8 ? 'form-section active' : 'form-section'
  }`}
  data-section="8"
>
  <CardContent className="p-8">
    <div className="flex items-center mb-6">
      <div className="w-12 h-12 bg-gradient-to-r from-purple-400 to-purple-600 rounded-full flex items-center justify-center mr-4">
        <Gauge className="text-white h-6 w-6" />
      </div>
      <h2 className="text-2xl font-bold text-gray-900 dark:text-white">ğŸ“Š Ã‰chelle de confiance</h2>
    </div>

    <div className="mb-8">
      <img 
        src="https://images.unsplash.com/photo-1607746882042-944635dfe10e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=300" 
        alt="Ã‰chelle de confiance personnelle" 
        className="w-full h-48 object-cover rounded-lg"
      />
    </div>

    <div className="space-y-4">
      <Label htmlFor="confiance">Sur une Ã©chelle de 1 Ã  10, Ã  quel point crois-tu en ton potentiel ?</Label>
      <Controller
        control={form.control}
        name="confiance"
        render={({ field }) => (
          <div className="flex items-center space-x-4">
            <Slider
              min={1}
              max={10}
              step={1}
              value={[field.value || 5]}
              onValueChange={(val) => field.onChange(val[0])}
              className="w-full"
            />
            <span className="text-sm font-medium text-gray-700 dark:text-gray-300">{field.value}</span>
          </div>
        )}
      />
    </div>
  </CardContent>
</Card>


{/* Section 4.6: Gauge */}
import { Gauge } from "lucide-react";
import { Controller } from "react-hook-form";
import { Slider } from "@/components/ui/slider"; // adapte le chemin si nÃ©cessaire

<Card 
  className={`shadow-xl border-l-4 border-purple-500 transition-all duration-500 ${
    currentSection === 8 ? 'form-section active' : 'form-section'
  }`}
  data-section="8"
>
  <CardContent className="p-8">
    <div className="flex items-center mb-6">
      <div className="w-12 h-12 bg-gradient-to-r from-purple-400 to-purple-600 rounded-full flex items-center justify-center mr-4">
        <Gauge className="text-white h-6 w-6" />
      </div>
      <h2 className="text-2xl font-bold text-gray-900 dark:text-white">ğŸ“Š Ã‰chelle de confiance</h2>
    </div>

    <div className="mb-8">
      <img 
        src="https://images.unsplash.com/photo-1607746882042-944635dfe10e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=300" 
        alt="Ã‰chelle de confiance personnelle" 
        className="w-full h-48 object-cover rounded-lg"
      />
      <figcaption className="text-sm text-gray-500 italic mt-2 text-center">
        ğŸ“Š Comment tu te sens face Ã  ton avenir ?
      </figcaption>
    </div>

    <div className="space-y-4">
      <Label htmlFor="confiance">Sur une Ã©chelle de 1 Ã  10, Ã  quel point crois-tu en ton potentiel ?</Label>
      <Controller
        control={form.control}
        name="confiance"
        render={({ field }) => (
          <div className="flex items-center space-x-4">
            <Slider
              min={1}
              max={10}
              step={1}
              value={[field.value || 5]}
              onValueChange={(val) => field.onChange(val[0])}
              className="w-full"
            />
            <span className="text-sm font-medium text-gray-700 dark:text-gray-300">{field.value}</span>
          </div>
        )}
      />
    </div>
  </CardContent>
</Card>


        {/* Section 5: Learning Style */}
        <Card 
          className={`shadow-xl border-l-4 border-indigo-500 transition-all duration-500 ${
            currentSection === 5 ? 'form-section active' : 'form-section'
          }`}
          data-section="5"
        >
          <CardContent className="p-8">
            <div className="flex items-center mb-6">
              <div className="w-12 h-12 bg-gradient-to-r from-indigo-500 to-blue-500 rounded-full flex items-center justify-center mr-4">
                <Brain className="text-white h-6 w-6" />
              </div>
              <h2 className="text-2xl font-bold text-gray-900 dark:text-white">ğŸ§  Style d'apprentissage</h2>
            </div>

            <div className="mb-8">
              <img 
                src="https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=300" 
                alt="DiffÃ©rents styles d'apprentissage pour jeunes" 
                className="w-full h-48 object-cover rounded-lg"
              />
            </div>

<div className="mb-8">
  <h3 className="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">
    ğŸ§  Quel est ton style dâ€™apprentissage prÃ©fÃ©rÃ© ?
  </h3>

  <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
    {checkboxOptions.apprentissageStyle.map((option) => {
      const IconComponent = option.icon;
      const id = `apprentissageStyle-${option.value}`;
      return (
        <div key={option.value} className="flex items-center border rounded-lg p-4 hover:border-indigo-500 transition-colors">
          <input
            type="checkbox"
            id={id}
            value={option.value}
            {...form.register("apprentissageStyle")}
            className="form-checkbox h-5 w-5 text-indigo-500 mr-3"
          />
          <label htmlFor={id} className="flex items-center space-x-2 cursor-pointer">
            <IconComponent className="h-6 w-6 text-indigo-500" />
            <span className="text-sm font-medium text-gray-800 dark:text-gray-200">
              {option.label}
            </span>
          </label>
        </div>
      );
    })}
  </div>
</div>




          </CardContent>
        </Card>

        {/* Section 6: Work Environment */}
 
<Card
  className={`shadow-xl border-l-4 border-teal-500 transition-all duration-500 ${
    currentSection === 6 ? 'form-section active' : 'form-section'
  }`}
  data-section="6"
>
  <CardContent className="p-8">
    {/* Titre et icÃ´ne */}
    <div className="flex items-center mb-6">
      <div className="w-12 h-12 bg-gradient-to-r from-teal-500 to-green-500 rounded-full flex items-center justify-center mr-4">
        <Building2 className="text-white h-6 w-6" />
      </div>
      <h2 className="text-2xl font-bold text-gray-900 dark:text-white">ğŸï¸ Environnement de travail prÃ©fÃ©rÃ©</h2>
    </div>

    {/* Image */}
    <div className="mb-8">
      <img
        src="https://images.unsplash.com/photo-1497032628192-86f99bcd76bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=300"
        alt="DiffÃ©rents environnements de travail modernes"
        className="w-full h-48 object-cover rounded-lg"
      />
    </div>

    {/* Choix dâ€™environnement */}
    <div className="mb-10">
      <h3 className="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">
        OÃ¹ te sens-tu le plus Ã  lâ€™aise pour travailler ?
      </h3>
      <p className="text-sm text-gray-600 dark:text-gray-400 mb-6">
        Tu peux cocher plusieurs environnements si tu hÃ©sites ou aimes varier.
      </p>

      <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        {checkboxOptions.environnement.map((option) => {
          const IconComponent = option.icon;
          const id = `environnement-${option.value}`;
          return (
            <div key={option.value} className="flex items-center border rounded-lg p-4 hover:border-teal-500 transition-colors">
              <input
                type="checkbox"
                id={id}
                value={option.value}
                {...form.register("environnement")}
                className="form-checkbox h-5 w-5 text-teal-500 mr-3"
              />
              <label htmlFor={id} className="flex items-center space-x-2 cursor-pointer">
                <IconComponent className="h-6 w-6 text-teal-500" />
                <span className="text-sm font-medium text-gray-800 dark:text-gray-200">
                  {option.label}
                </span>
              </label>
            </div>
          );
        })}
      </div>
    </div>

    {/* TÃ©lÃ©travail */}
    <div className="mb-4">
      <label htmlFor="teletravail" className="block font-medium mb-2">
        ğŸ’» PrÃ©fÃ©rence tÃ©lÃ©travail
      </label>
      <select
        {...form.register("teletravail")}
        id="teletravail"
        className="w-full border rounded px-3 py-2"
      >
        <option value="">SÃ©lectionner...</option>
        <option value="oui">Oui</option>
        <option value="non">Non</option>
        <option value="mixte">Mixte</option>
      </select>
    </div>
  </CardContent>
</Card>



{/* Section 7: Personal Values */}
<Card
  className={`shadow-xl border-l-4 border-pink-500 transition-all duration-500 ${
    currentSection === 7 ? 'form-section active' : 'form-section'
  }`}
  data-section="7"
>
  <CardContent className="p-8">
    {/* Titre et icÃ´ne */}
    <div className="flex items-center mb-6">
      <div className="w-12 h-12 bg-gradient-to-r from-pink-500 to-red-500 rounded-full flex items-center justify-center mr-4">
        <Heart className="text-white h-6 w-6" />
      </div>
      <h2 className="text-2xl font-bold text-gray-900 dark:text-white">ğŸŒ± Valeurs personnelles</h2>
    </div>

    {/* Image */}
    <div className="mb-8">
      <img
        src="https://images.unsplash.com/photo-1529390079861-591de354faf5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=300"
        alt="Jeunes exprimant leurs valeurs personnelles"
        className="w-full h-48 object-cover rounded-lg"
      />
    </div>

    {/* Valeurs phares */}
    <div className="mb-12">
      <h3 className="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">
        Valeurs phares (notation de 1 Ã  5)
      </h3>
      <p className="text-sm text-gray-600 dark:text-gray-400 mb-6">
        5 = TrÃ¨s important, 1 = Pas important
      </p>

      <div className="space-y-4">
        {[
          { key: "valeur_aventure", label: "ğŸŒŸ Aventure / Exploration" },
          { key: "valeur_creativite", label: "ğŸ¨ CrÃ©ativitÃ© / OriginalitÃ©" },
          { key: "valeur_securite", label: "ğŸ›¡ï¸ SÃ©curitÃ© / StabilitÃ©" },
          { key: "valeur_aider", label: "ğŸ¤ Aider les autres / Altruisme" },
          { key: "valeur_autonomie", label: "ğŸ¦‹ IndÃ©pendance / Autonomie" },
          { key: "valeur_curiosite", label: "ğŸ§  Apprentissage / CuriositÃ©" },
          { key: "valeur_collaboration", label: "ğŸ‘¥ Travail d'Ã©quipe / Collaboration" },
          { key: "valeur_reconnaissance", label: "ğŸ† Reconnaissance / Statut" },
          { key: "valeur_equilibre", label: "âš–ï¸ Ã‰quilibre vie pro/perso" },
          { key: "valeur_defis", label: "ğŸš€ DÃ©fis / Surpassement de soi" },
          { key: "valeur_justice", label: "âš–ï¸ Justice / Ã‰galitÃ©" },
          { key: "valeur_nature", label: "ğŸŒ Respect de la nature" },
        ].map((item) => (
          <div
            key={item.key}
            className="border rounded-lg px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition"
          >
            <div className="flex flex-col md:flex-row md:items-center justify-between">
              <span className="text-base font-medium text-gray-800 dark:text-gray-200 mb-2 md:mb-0">
                {item.label}
              </span>

              <div className="flex items-center gap-3">
                {[1, 2, 3, 4, 5].map((num) => (
                  <RadioGroupItem
                    key={num}
                    label={num.toString()}
                    value={num.toString()}
                    name={item.key}
                    checked={form.watch(item.key)?.toString() === num.toString()}
                    onChange={(e) => form.setValue(item.key, parseInt(e.target.value))}
                  />
                ))}
              </div>
            </div>

            <InterpretationValeursPhares
              keyValeur={item.key}
              score={parseInt(form.watch(item.key)?.toString() || "0")}
            />
          </div>
        ))}
      </div>
    </div>

    {/* Valeurs gÃ©nÃ©rales */}
    <div className="mb-4">
      <h3 className="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">
        Valeurs gÃ©nÃ©rales (cases Ã  cocher)
      </h3>
      <p className="text-sm text-gray-600 dark:text-gray-400 mb-6">
        Coche les valeurs qui te parlent le plus.
      </p>

      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
        {checkboxOptions.valeurs_generales.map((option) => (
          <div key={option.value} className="flex items-center">
            <input
              type="checkbox"
              id={`valeurs_generales-${option.value}`}
              value={option.value}
              {...form.register("valeurs_generales")}
              className="form-checkbox h-5 w-5 text-pink-500"
            />
            <label
              htmlFor={`valeurs_generales-${option.value}`}
              className="ml-2 text-sm text-gray-800 dark:text-gray-200"
            >
              {option.label}
            </label>
          </div>
        ))}
      </div>
    </div>
  </CardContent>
</Card>





{/* Section 8: Knowledge & Experience */}

<Card
  className={`shadow-xl border-l-4 border-indigo-500 transition-all duration-500 ${
    currentSection === 8 ? 'form-section active' : 'form-section'
  }`}
  data-section="8"
>
  <CardContent className="p-8">
    {/* Titre et icÃ´ne */}
    <div className="flex items-center mb-6">
      <div className="w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center mr-4">
        <Book className="text-white h-6 w-6" />
      </div>
      <h2 className="text-2xl font-bold text-gray-900 dark:text-white">ğŸ“š Connaissances & ExpÃ©riences</h2>
    </div>

    {/* Image */}
    <div className="mb-8">
      <img
        src="https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=300"
        alt="Livres et connaissances scolaires"
        className="w-full h-48 object-cover rounded-lg"
      />
    </div>

    {/* Domaines de connaissance */}
    <div className="mb-10">
      <h3 className="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">
        Domaines de connaissance
      </h3>
      <p className="text-sm text-gray-600 dark:text-gray-400 mb-6">
        Coche les domaines que tu connais ou qui tâ€™intÃ©ressent.
      </p>

      <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
        {checkboxOptions.connaissance.map((option) => {
          const id = `connaissance-${option.value}`;
          return (
            <div key={option.value} className="flex items-center">
              <input
                type="checkbox"
                id={id}
                value={option.value}
                {...form.register("connaissance")}
                className="form-checkbox h-5 w-5 text-indigo-500"
              />
              <label
                htmlFor={id}
                className="ml-2 text-sm text-gray-800 dark:text-gray-200"
              >
                {option.label}
              </label>
            </div>
          );
        })}
      </div>
    </div>

    {/* Intro mentorale */}
    <p className="text-sm text-gray-600 dark:text-gray-400 mb-4">
      Et maintenant, parlons de ton expÃ©rience sur le terrainâ€¦
    </p>

    {/* BÃ©nÃ©volat */}
    <div className="mb-4">
      <label htmlFor="benevolat" className="block font-medium mb-2">
        ğŸ™‹â€â™€ï¸ As-tu dÃ©jÃ  fait du bÃ©nÃ©volat ?
      </label>
      <select
        {...form.register("benevolat")}
        id="benevolat"
        className="w-full border rounded px-3 py-2"
      >
        <option value="">SÃ©lectionner...</option>
        <option value="Oui">ğŸ™Œ Oui</option>
        <option value="Non">ğŸ¤·â€â™‚ï¸ Non</option>
        <option value="Je ne sais pas">ğŸ¤” Je ne sais pas</option>
      </select>
      {form.formState.errors.benevolat && (
        <p className="text-red-500 text-sm mt-1">
          {form.formState.errors.benevolat.message}
        </p>
      )}
    </div>

    {/* Bulle mentorale */}
    {form.watch("benevolat") && (
      <div className="mt-4 p-4 bg-indigo-50 border-l-4 border-indigo-400 text-indigo-800 rounded shadow-sm transition-opacity duration-500 ease-in-out">
        {form.watch("benevolat") === "Oui" && (
          <p className="text-sm italic">
            ğŸ™Œ Bravo pour ton engagementâ€¯! Le bÃ©nÃ©volat dÃ©veloppe des compÃ©tences humaines prÃ©cieuses et montre ton envie dâ€™aider les autres.
          </p>
        )}
        {form.watch("benevolat") === "Non" && (
          <p className="text-sm italic">
            ğŸ¤·â€â™‚ï¸ Pas de souciâ€¯! Il existe plein dâ€™autres faÃ§ons de contribuer ou de dÃ©couvrir des domaines qui te passionnent.
          </p>
        )}
        {form.watch("benevolat") === "Je ne sais pas" && (
          <p className="text-sm italic">
            ğŸ¤” Câ€™est normal dâ€™hÃ©siter. Le bÃ©nÃ©volat peut Ãªtre une belle occasion dâ€™explorer tes valeurs et de rencontrer des personnes inspirantes.
          </p>
        )}
      </div>
    )}
  </CardContent>
</Card>





        {/* Section 9: Final Summary */}
        <Card 
          className={`shadow-xl gradient-bg text-white transition-all duration-500 ${
            currentSection === 9 ? 'form-section active' : 'form-section'
          }`}
          data-section="9"
        >
          <CardContent className="p-8">
            <div className="text-center mb-8">
              <div className="w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4">
                <Sparkles className="h-8 w-8" />
              </div>
              <h2 className="text-3xl font-bold mb-2">ğŸ‰ PrÃªt(e) pour la magie ?</h2>
              <p className="text-xl opacity-90">Un peu de patience (1 Ã  4 minutes), notre IA va analyser ton profil et te proposer des orientations et mÃ©tiers pour toi !</p>
            </div>

            <div className="text-center">
              <Button
                type="submit"
                disabled={isLoading}
                className="inline-flex items-center px-12 py-4 bg-white text-primary text-xl font-bold rounded-full hover:bg-gray-100 transition-all duration-300 transform hover:scale-105 shadow-lg"
              >
                {isLoading ? (
                  <>
                    <div className="animate-spin rounded-full h-5 w-5 border-2 border-primary border-t-transparent mr-3" />
                    Analyse en cours...
                  </>
                ) : (
                  <>
                    <Rocket className="mr-3 h-5 w-5 animate-bounce-gentle" />
                    DÃ©couvrir mes mÃ©tiers de rÃªve !
                    <Sparkles className="ml-3 h-5 w-5" />
                  </>
                )}
              </Button>
            </div>
          </CardContent>
        </Card>
      </form>

    {profilData && <ProfilEtPrompt data={profilData} />}


      {/* Navigation Controls */}
      <div className="fixed bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-4 z-50">
        <Button
          onClick={prevSection}
          disabled={currentSection === 1}
          variant="secondary"
          className="flex items-center px-6 py-3 bg-gray-600 text-white rounded-full hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <ArrowLeft className="mr-2 h-4 w-4" />
          PrÃ©cÃ©dent
        </Button>

        {currentSection < totalSections && (
          <Button
            onClick={nextSection}
            className="flex items-center px-6 py-3 bg-gradient-to-r from-primary to-secondary text-white rounded-full hover:from-blue-600 hover:to-green-600 transition-colors"
          >
            Suivant
            <ArrowRight className="ml-2 h-4 w-4" />
          </Button>
        )}
      </div>
    </div> // â† ferme le bloc principal du return
  );       // â† ferme le return
}          // â† ferme la fonction
